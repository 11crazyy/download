<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.httpdownloadserver.dao.TaskDAO">
    <resultMap id="settingsResultMap" type="com.example.httpdownloadserver.dataobject.TaskDO">
        <result column="id" jdbcType="BIGINT" property="id"/>
        <result column="status" jdbcType="VARCHAR" property="status"/>
        <result column="download_speed" jdbcType="DOUBLE" property="downloadSpeed"/>
        <result column="download_progress" jdbcType="INTEGER" property="downloadProgress"/>
        <result column="download_remaining_time" jdbcType="INTEGER" property="downloadProgress"/>
        <result column="gmt_created" jdbcType="TIMESTAMP" property="gmtCreated"/>
        <result column="gmt_modified" jdbcType="TIMESTAMP" property="gmtModified"/>
    </resultMap>
    <insert id="insert">
        insert into task (status, download_speed, download_progress, download_remaining_time, gmt_created, gmt_modified)
        values (#{status,jdbcType=VARCHAR}, #{downloadSpeed,jdbcType=DOUBLE}, #{downloadProgress,jdbcType=INTEGER}, #{downloadRemainingTime,jdbcType=INTEGER}, now(), now())
    </insert>
    <delete id="deleteById">
        delete
        from task
        where id = #{id}
    </delete>
    <select id="selectById" resultType="com.example.httpdownloadserver.dataobject.TaskDO">
        select id, status, download_speed, download_progress, download_remaining_time, gmt_created, gmt_modified from task
        where id = #{id}
    </select>
    <select id="selectAll" resultType="com.example.httpdownloadserver.dataobject.TaskDO">
        select id, status, download_speed, download_progress, download_remaining_time, gmt_created, gmt_modified from task
    </select>
    <select id="selectByStatus" resultType="com.example.httpdownloadserver.dataobject.TaskDO" parameterType="java.lang.String">
        select id, status, download_speed, download_progress, download_remaining_time, gmt_created, gmt_modified from task
        where status = #{status}
    </select>


</mapper>